{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import'./header.css';import{AuthContext}from'../../context/AuthContext';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import{Storage}from'@capacitor/storage';import axios from'axios';import avatar2 from'../../AvatarImage/avatar2.png';import{CircularProgress}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Headers(){const[img,setImg]=useState();const[loading,setLoading]=useState(false);const{jwt,loggedIn}=useContext(AuthContext);const history=useHistory();useEffect(()=>{gitImage();},[jwt]);const gitImage=async()=>{try{const response=await axios.get('http://localhost:4000/getUserId',{headers:{Authorization:jwt}});setImg(response.data.avatar);}catch(e){console.error(e);}};const logOut=async()=>{setLoading(true);await Storage.remove({key:'accessToken'});history.push('/get-all-post');window.location.reload();setLoading(false);};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:70}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-contaier\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"appName\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/get-all-post\",children:\"Photogram\"})}),img?/*#__PURE__*/_jsx(\"img\",{className:\"HeaderImg\",onClick:()=>history.push('/account/update'),src:img}):/*#__PURE__*/_jsx(\"img\",{className:\"HeaderImg\",onClick:()=>history.push('/account/update'),src:avatar2}),/*#__PURE__*/_jsx(\"div\",{className:\"ulheader\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"margin-betweent\",children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-square-plus\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/post\",children:\"Add\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"margin-betweent\",children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-magnifying-glass\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/get-all-post\",children:\"Posts\"})]})}),!loggedIn?/*#__PURE__*/_jsx(\"div\",{className:\"margin-betweent\",children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-arrow-right-to-bracket\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"Login\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"btnOut\",children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-arrow-right-to-bracket\"}),/*#__PURE__*/_jsx(\"a\",{onClick:logOut,children:\"Log out\"})]})})]})})]})})});}export default Headers;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","useHistory","Storage","axios","avatar2","CircularProgress","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Headers","img","setImg","loading","setLoading","jwt","loggedIn","history","gitImage","response","get","headers","Authorization","data","avatar","e","console","error","logOut","remove","key","push","window","location","reload","children","size","className","href","onClick","src"],"sources":["C:/Users/baaan/Desktop/Photogram/photogramclient/src/components/header/Headers.js"],"sourcesContent":["\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport './header.css'\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { Storage } from '@capacitor/storage';\r\nimport axios from 'axios';\r\nimport avatar2 from '../../AvatarImage/avatar2.png'\r\nimport { CircularProgress } from '@mui/material';\r\n\r\nfunction Headers() {\r\n  const [img, setImg] = useState();\r\n  const [loading, setLoading]= useState(false);\r\n\r\n  \r\n  const { jwt, loggedIn } = useContext(AuthContext);\r\n\r\n  const history = useHistory();\r\n\r\n\r\n  useEffect(() => {\r\n    gitImage()\r\n  }, [jwt]);\r\n\r\n  const gitImage = async () => {\r\n   \r\n    try {\r\n      const response = await axios.get('http://localhost:4000/getUserId', {\r\n        headers: {\r\n          Authorization: jwt\r\n        }\r\n      });\r\n      setImg(response.data.avatar);\r\n    } catch (e) {\r\n      console.error(e);\r\n      \r\n    }\r\n  };\r\n\r\n  const logOut = async () => {\r\n    setLoading(true);\r\n    await Storage.remove({\r\n      key: 'accessToken'\r\n    });\r\n    history.push('/get-all-post');\r\n    window.location.reload();\r\n    setLoading(false);\r\n  };\r\n  return (\r\n    <>\r\n    {\r\n      loading ? <CircularProgress  size={70}/> :\r\n      <>\r\n      <div className='header-contaier'>\r\n        <p className='appName'><a href='/get-all-post'>Photogram</a></p>\r\n        {\r\n          img ? <img className='HeaderImg' onClick={() => history.push('/account/update')} src={img} />\r\n            :\r\n            <img className='HeaderImg' onClick={() => history.push('/account/update')} src={avatar2} />\r\n\r\n        }\r\n        <div className='ulheader'>\r\n          <ul>\r\n            <div className='margin-betweent'>\r\n              <li>\r\n                <i className=\"fa-regular fa-square-plus\"></i>\r\n                <a href='/post'>Add</a>\r\n              </li>\r\n            </div>\r\n            <div className='margin-betweent'>\r\n              <li>\r\n                <i className=\"fa-solid fa-magnifying-glass\"></i>\r\n                <a href='/get-all-post'>Posts</a>\r\n              </li>\r\n            </div>\r\n            {\r\n              !loggedIn ?\r\n                <div className='margin-betweent'>\r\n                  <li>\r\n                    <i className=\"fa-solid fa-arrow-right-to-bracket\"></i>\r\n                    <a href='/login'>Login</a>\r\n                  </li>\r\n                </div>\r\n                :\r\n                <div className='btnOut'>\r\n                  <li >\r\n                    <i className=\"fa-solid fa-arrow-right-to-bracket\"></i>\r\n                    <a onClick={logOut}>Log out</a>\r\n                  </li>\r\n                </div>\r\n            }\r\n\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      </>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Headers"],"mappings":"AACA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,MAAO,cAAc,CACrB,OAASC,WAAW,KAAQ,2BAA2B,CACvD,OAASC,UAAU,KAAQ,2CAA2C,CACtE,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,+BAA+B,CACnD,OAASC,gBAAgB,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEjD,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,GAAG,CAAEC,MAAM,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAChC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAEjB,QAAQ,CAAC,KAAK,CAAC,CAG5C,KAAM,CAAEkB,GAAG,CAAEC,QAAS,CAAC,CAAGrB,UAAU,CAACG,WAAW,CAAC,CAEjD,KAAM,CAAAmB,OAAO,CAAGlB,UAAU,CAAC,CAAC,CAG5BH,SAAS,CAAC,IAAM,CACdsB,QAAQ,CAAC,CAAC,CACZ,CAAC,CAAE,CAACH,GAAG,CAAC,CAAC,CAET,KAAM,CAAAG,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAE3B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,CAAC,iCAAiC,CAAE,CAClEC,OAAO,CAAE,CACPC,aAAa,CAAEP,GACjB,CACF,CAAC,CAAC,CACFH,MAAM,CAACO,QAAQ,CAACI,IAAI,CAACC,MAAM,CAAC,CAC9B,CAAE,MAAOC,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC,CAElB,CACF,CAAC,CAED,KAAM,CAAAG,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzBd,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAd,OAAO,CAAC6B,MAAM,CAAC,CACnBC,GAAG,CAAE,aACP,CAAC,CAAC,CACFb,OAAO,CAACc,IAAI,CAAC,eAAe,CAAC,CAC7BC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CACxBpB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CACD,mBACET,IAAA,CAAAI,SAAA,EAAA0B,QAAA,CAEEtB,OAAO,cAAGR,IAAA,CAACF,gBAAgB,EAAEiC,IAAI,CAAE,EAAG,CAAC,CAAC,cACxC/B,IAAA,CAAAI,SAAA,EAAA0B,QAAA,cACA5B,KAAA,QAAK8B,SAAS,CAAC,iBAAiB,CAAAF,QAAA,eAC9B9B,IAAA,MAAGgC,SAAS,CAAC,SAAS,CAAAF,QAAA,cAAC9B,IAAA,MAAGiC,IAAI,CAAC,eAAe,CAAAH,QAAA,CAAC,WAAS,CAAG,CAAC,CAAG,CAAC,CAE9DxB,GAAG,cAAGN,IAAA,QAAKgC,SAAS,CAAC,WAAW,CAACE,OAAO,CAAEA,CAAA,GAAMtB,OAAO,CAACc,IAAI,CAAC,iBAAiB,CAAE,CAACS,GAAG,CAAE7B,GAAI,CAAE,CAAC,cAE3FN,IAAA,QAAKgC,SAAS,CAAC,WAAW,CAACE,OAAO,CAAEA,CAAA,GAAMtB,OAAO,CAACc,IAAI,CAAC,iBAAiB,CAAE,CAACS,GAAG,CAAEtC,OAAQ,CAAE,CAAC,cAG/FG,IAAA,QAAKgC,SAAS,CAAC,UAAU,CAAAF,QAAA,cACvB5B,KAAA,OAAA4B,QAAA,eACE9B,IAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAF,QAAA,cAC9B5B,KAAA,OAAA4B,QAAA,eACE9B,IAAA,MAAGgC,SAAS,CAAC,2BAA2B,CAAI,CAAC,cAC7ChC,IAAA,MAAGiC,IAAI,CAAC,OAAO,CAAAH,QAAA,CAAC,KAAG,CAAG,CAAC,EACrB,CAAC,CACF,CAAC,cACN9B,IAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAF,QAAA,cAC9B5B,KAAA,OAAA4B,QAAA,eACE9B,IAAA,MAAGgC,SAAS,CAAC,8BAA8B,CAAI,CAAC,cAChDhC,IAAA,MAAGiC,IAAI,CAAC,eAAe,CAAAH,QAAA,CAAC,OAAK,CAAG,CAAC,EAC/B,CAAC,CACF,CAAC,CAEJ,CAACnB,QAAQ,cACPX,IAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAF,QAAA,cAC9B5B,KAAA,OAAA4B,QAAA,eACE9B,IAAA,MAAGgC,SAAS,CAAC,oCAAoC,CAAI,CAAC,cACtDhC,IAAA,MAAGiC,IAAI,CAAC,QAAQ,CAAAH,QAAA,CAAC,OAAK,CAAG,CAAC,EACxB,CAAC,CACF,CAAC,cAEN9B,IAAA,QAAKgC,SAAS,CAAC,QAAQ,CAAAF,QAAA,cACrB5B,KAAA,OAAA4B,QAAA,eACE9B,IAAA,MAAGgC,SAAS,CAAC,oCAAoC,CAAI,CAAC,cACtDhC,IAAA,MAAGkC,OAAO,CAAEX,MAAO,CAAAO,QAAA,CAAC,SAAO,CAAG,CAAC,EAC7B,CAAC,CACF,CAAC,EAGR,CAAC,CACF,CAAC,EACH,CAAC,CACJ,CAAC,CAEH,CAAC,CAEP,CAEA,cAAe,CAAAzB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}