{"ast":null,"code":"import React,{useState}from'react';import'./login.css';// import { LOGIN_URL } from '../../config/urls';\nimport{Storage}from'@capacitor/storage';import axios from'axios';import{Alert,CircularProgress}from'@mui/material';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[status,setStatus]=useState();const history=useHistory();const onSubmet=async()=>{const bassData={email,password};try{setLoading(true);await axios.post('http://localhost:4000/login',bassData).then(res=>{Storage.set({key:'accessToken',value:res.data.accessToken});});setLoading(false);history.push('/get-all-post');window.location.reload();}catch(e){setLoading(false);setStatus(e.response.status);console.log(e);}};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:70,sx:{position:\"fixed\",left:\"50%\",top:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:2}}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"login-contianer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inpus-continer\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0643\\u062A\\u0631\\u0646\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:email,type:\"text\",onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u0643\\u0644\\u0645\\u0647 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:password,onChange:e=>{setPassword(e.target.value);},type:\"password\",required:true}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onSubmet(),children:\"\\u062A\\u0633\\u062C\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"a\",{href:\"register\",children:\"\\u0627\\u0646\\u0634\\u0627\\u0621 \\u062D\\u0633\\u0627\\u0628\"}),status===401?/*#__PURE__*/_jsx(Alert,{style:{fontSize:'20px',maxHeight:'50px',maxWidth:'auto'},className:\"alert\",severity:\"error\",children:\"\\u0643\\u0644\\u0645\\u0647 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0648 \\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u063A\\u064A\\u0631 \\u0635\\u062D\\u064A\\u062D\\u0647\"}):status===500?/*#__PURE__*/_jsx(Alert,{style:{fontSize:'20px',maxHeight:'50px',maxWidth:'auto'},className:\"alert\",severity:\"error\",children:\"\\u0627\\u0645\\u0644\\u0623 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0646\\u0627\\u062A\"}):'']})})})});}export default Login;","map":{"version":3,"names":["React","useState","Storage","axios","Alert","CircularProgress","useHistory","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","email","setEmail","password","setPassword","loading","setLoading","status","setStatus","history","onSubmet","bassData","post","then","res","set","key","value","data","accessToken","push","window","location","reload","e","response","console","log","children","size","sx","position","left","top","transform","zIndex","className","htmlFor","name","type","onChange","target","required","onClick","href","style","fontSize","maxHeight","maxWidth","severity"],"sources":["C:/Users/baaan/Desktop/Photogram/photogramclient/src/pages/login/Login.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport './login.css'\r\n// import { LOGIN_URL } from '../../config/urls';\r\nimport { Storage } from '@capacitor/storage';\r\nimport axios from 'axios';\r\nimport { Alert, CircularProgress } from '@mui/material';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [status, setStatus] = useState();\r\n\r\n  const history = useHistory();\r\n\r\n  \r\n  const onSubmet = async () => {\r\n    const bassData = {\r\n      email,\r\n      password\r\n    }\r\n    \r\n    try {\r\n      setLoading(true)\r\n      await axios.post('http://localhost:4000/login', bassData).then(res => {\r\n        Storage.set({\r\n          key: 'accessToken',\r\n          value: res.data.accessToken\r\n        })\r\n      })\r\n      setLoading(false)\r\n      history.push('/get-all-post')\r\n      window.location.reload();\r\n    } catch (e) {\r\n      setLoading(false)\r\n      setStatus(e.response.status)\r\n      console.log(e)\r\n    }\r\n    \r\n  }\r\n\r\n  return (\r\n    <>\r\n      {\r\n        loading ? <CircularProgress size={70}\r\n          sx={{\r\n            position: \"fixed\",\r\n            left: \"50%\",\r\n            top: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            zIndex: 2\r\n          }} />\r\n          :\r\n          <>\r\n            <div className='login-contianer'>\r\n              <div className='inpus-continer'>\r\n                <label htmlFor='email'>البريد الكترني</label>\r\n                <input  name='email' value={email} type='text' onChange={(e) => setEmail(e.target.value)} required/>\r\n                <label htmlFor='password'>كلمه المرور</label>\r\n                <input name='password' value={password} onChange={(e) => { setPassword(e.target.value) }} type='password' required/>\r\n                <button onClick={() =>  onSubmet() }>تسجيل</button>\r\n                <a href='register'>انشاء حساب</a>\r\n                {\r\n                  status === 401 ?  <Alert style={{fontSize: '20px', maxHeight: '50px', maxWidth: 'auto'}} className='alert' severity=\"error\">كلمه المرور او البريد غير صحيحه</Alert> \r\n                  : status === 500 ? <Alert style={{fontSize: '20px', maxHeight: '50px', maxWidth: 'auto'}} className='alert' severity=\"error\">املأ جميع الخانات</Alert> : ''\r\n                }\r\n              </div>\r\n            </div>\r\n          </>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}