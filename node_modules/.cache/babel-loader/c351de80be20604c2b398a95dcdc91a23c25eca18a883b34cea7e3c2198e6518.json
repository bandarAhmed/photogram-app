{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import'./AddNewPost.css';import axios from'axios';import{AuthContext}from'../../context/AuthContext';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import{Alert,CircularProgress}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AddNewPost(){const history=useHistory();const{jwt}=useContext(AuthContext);const[img,setImgFile]=useState('');const[title,setTitle]=useState('');const[discraption,setDiscraption]=useState('');const[loading,setLoading]=useState('');const[status,setStatus]=useState('');const onSubmit=async()=>{const formData=new FormData();formData.append('img',img);formData.append('title',title);formData.append('discraption',discraption);try{setLoading(true);await axios.post('http://localhost:4000/post',formData,{headers:{Authorization:jwt}});history.push('/get-all-post');setLoading(false);}catch(e){setStatus(e.response.status);console.log(e);setLoading(false);}};const handleFileChange=e=>{const file=e.target.files[0];setImgFile(file);};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:70,sx:{position:\"fixed\",left:\"50%\",top:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:2}}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"all\",children:/*#__PURE__*/_jsx(\"div\",{className:\"add-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Add Image\"}),img?/*#__PURE__*/_jsx(\"img\",{className:\"imgOfnewPost\",alt:\"Error\",src:URL.createObjectURL(img)}):/*#__PURE__*/_jsx(\"input\",{required:true,className:\"imgFile\",onChange:handleFileChange,type:\"file\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:title,onChange:e=>setTitle(e.target.value),className:\"text-input\",type:\"text\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Dicraptions\"}),/*#__PURE__*/_jsx(\"textarea\",{required:true,value:discraption,onChange:e=>setDiscraption(e.target.value),type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"post-button\",onClick:onSubmit,type:\"submit\",children:\"\\u0646\\u0634\\u0631\"}),status?/*#__PURE__*/_jsx(Alert,{style:{fontSize:'20px',maxHeight:'50px',maxWidth:'auto',marginBottom:\"5px\"},className:\"alert\",severity:\"error\",children:\" \\u064A\\u062D\\u0628 \\u0627\\u0636\\u0627\\u0641\\u0647 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u062D\\u0642\\u0648\\u0644\"}):'']})})})})});}export default AddNewPost;","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","AuthContext","useHistory","Alert","CircularProgress","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddNewPost","history","jwt","img","setImgFile","title","setTitle","discraption","setDiscraption","loading","setLoading","status","setStatus","onSubmit","formData","FormData","append","post","headers","Authorization","push","e","response","console","log","handleFileChange","file","target","files","children","size","sx","position","left","top","transform","zIndex","className","alt","src","URL","createObjectURL","required","onChange","type","value","onClick","style","fontSize","maxHeight","maxWidth","marginBottom","severity"],"sources":["C:/Users/baaan/Desktop/Photogram/photogramclient/src/pages/AddNewPost/AddNewPost.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport './AddNewPost.css';\r\nimport axios from 'axios';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { Alert, CircularProgress } from '@mui/material';\r\n\r\n\r\nfunction AddNewPost() {\r\n\r\n  const history = useHistory()\r\n  const { jwt } = useContext(AuthContext);\r\n  const [img, setImgFile] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [discraption, setDiscraption] = useState('');\r\n  const [loading, setLoading] = useState('');\r\n  const [status, setStatus] = useState('');\r\n\r\n  const onSubmit = async () => {\r\n    const formData = new FormData();\r\n    formData.append('img', img);\r\n    formData.append('title', title);\r\n    formData.append('discraption', discraption);\r\n\r\n    try {\r\n      setLoading(true)\r\n      await axios.post('http://localhost:4000/post', formData, {\r\n        headers: {\r\n          Authorization: jwt,\r\n        },\r\n      });\r\n      history.push('/get-all-post')\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setStatus(e.response.status)\r\n      console.log(e);\r\n      setLoading(false)\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setImgFile(file);\r\n  };\r\n\r\n  return (\r\n    <>\r\n\r\n      {\r\n        loading ? <CircularProgress size={70}\r\n          sx={{\r\n            position: \"fixed\",\r\n            left: \"50%\",\r\n            top: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            zIndex: 2\r\n          }} />\r\n          :\r\n          <>\r\n            <div className='all'>\r\n              <div className='add-container'>\r\n                <div className='form-container'>\r\n                  <label>Add Image</label>\r\n                  {img ?\r\n                    <img className='imgOfnewPost' alt='Error' src={URL.createObjectURL(img)} />\r\n                    :\r\n                    <input required className='imgFile' onChange={handleFileChange} type='file' />\r\n                  }\r\n                  <label>Title</label>\r\n                  <input required value={title} onChange={(e) => setTitle(e.target.value)} className='text-input' type='text' />\r\n                  <label>Dicraptions</label>\r\n                  <textarea required value={discraption} onChange={(e) => setDiscraption(e.target.value)} type='text' />\r\n                  <button className='post-button' onClick={onSubmit} type='submit'>نشر</button>\r\n                  {\r\n                    status ? <Alert style={{fontSize: '20px', maxHeight: '50px', maxWidth: 'auto', marginBottom: \"5px\"}} className='alert' severity=\"error\"> يحب اضافه جميع الحقول</Alert> : ''\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n      }\r\n    </>\r\n\r\n  );\r\n}\r\n\r\nexport default AddNewPost"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}