{"ast":null,"code":"import axios from'axios';import React,{useState}from'react';import\"./register.css\";import Alert from'@mui/material/Alert';import{CircularProgress}from'@mui/material';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import{Storage}from'@capacitor/storage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[avatar,setAvatar]=useState('');const[seePassword,setSeePassword]=useState('');const[loading,setLoading]=useState(false);const[Status,setStatus]=useState();const history=useHistory();const onSubmet=async()=>{const form=new FormData();form.append('name',name);form.append('email',email);form.append('password',password);form.append('avatar',avatar);try{setLoading(true);await axios.post('http://localhost:4000/register',form);setLoading(false);}catch(e){setStatus(e.response.status);setLoading(false);console.error(e);}await autoLogin();};const autoLogin=async()=>{const formLogin={email:email,password:password};try{await axios.post('http://localhost:4000/login',formLogin).then(res=>{Storage.set({key:'accessToken',value:res.data.accessToken});});history.push('/get-all-post');}catch(e){setStatus(e.response.status);console.log(e);}};const handleFileChange=e=>{const file=e.target.files[0];setAvatar(file);};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:70,sx:{position:\"fixed\",left:\"50%\",top:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:2}}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"register-contianer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-contianer\",children:[avatar?/*#__PURE__*/_jsx(\"img\",{alt:\"Error\",style:{borderRadius:'50%',width:'80px',height:'80px'},src:URL.createObjectURL(avatar)}):/*#__PURE__*/_jsx(\"input\",{className:\"imgFile\",onChange:handleFileChange,type:\"file\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:name,onChange:e=>setName(e.target.value),type:\"text\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0627\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:email,onChange:e=>setEmail(e.target.value),type:\"text\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:password,onChange:e=>setPassword(e.target.value),type:\"password\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password2\",children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password2\",onChange:e=>setSeePassword(e.target.value),type:\"password\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"sunmet\",onClick:()=>onSubmet(),children:\"\\u0627\\u0646\\u0634\\u0627\\u0621 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"br\",{}),password!==seePassword?/*#__PURE__*/_jsx(Alert,{style:{fontSize:'20px'},className:\"alert\",severity:\"error\",children:\"\\u0643\\u0644\\u0645\\u0647 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0637\\u0627\\u0628\\u0642\\u0647\"}):'',Status===401?/*#__PURE__*/_jsx(Alert,{style:{fontSize:'20px',marginTop:'30px'},className:\"alert\",severity:\"error\",children:\"\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628 \\u0645\\u0633\\u062C\\u0644 \\u0627\\u0630\\u0647\\u0628 \\u0627\\u0644\\u0649 \\u0644\\u062F\\u064A \\u062D\\u0633\\u0627\\u0628 \\u0628\\u0627\\u0644\\u0641\\u0639\\u0644\"}):Status===500?/*#__PURE__*/_jsx(Alert,{style:{fontSize:'20px',maxHeight:'50px',maxWidth:'auto'},className:\"alert\",severity:\"error\",children:\"\\u0627\\u0645\\u0644\\u0623 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0646\\u0627\\u062A\"}):'',/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"\\u0644\\u062F\\u064A \\u062D\\u0633\\u0627\\u0628 \\u0628\\u0627\\u0644\\u0641\\u0639\\u0644\"})]})})})});}export default Register;","map":{"version":3,"names":["axios","React","useState","Alert","CircularProgress","useHistory","Storage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","name","setName","email","setEmail","password","setPassword","avatar","setAvatar","seePassword","setSeePassword","loading","setLoading","Status","setStatus","history","onSubmet","form","FormData","append","post","e","response","status","console","error","autoLogin","formLogin","then","res","set","key","value","data","accessToken","push","log","handleFileChange","file","target","files","children","size","sx","position","left","top","transform","zIndex","className","alt","style","borderRadius","width","height","src","URL","createObjectURL","onChange","type","htmlFor","required","onClick","fontSize","severity","marginTop","maxHeight","maxWidth","href"],"sources":["C:/Users/baaan/Desktop/Photogram/photogramclient/src/pages/register/register.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react'\r\nimport \"./register.css\";\r\nimport Alert from '@mui/material/Alert';\r\nimport { CircularProgress } from '@mui/material';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { Storage } from '@capacitor/storage';\r\n\r\n\r\nfunction Register() {\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [avatar, setAvatar] = useState('');\r\n  const [seePassword, setSeePassword] = useState('');\r\n  const [loading, setLoading] = useState(false)\r\n  const [Status, setStatus] = useState()\r\n\r\n\r\n  const history = useHistory();\r\n\r\n  const onSubmet = async () => {\r\n    const form = new FormData()\r\n   form.append('name', name)\r\n   form.append('email', email)\r\n   form.append('password', password)\r\n   form.append('avatar', avatar)\r\n    try {\r\n      setLoading(true)\r\n      await axios.post('http://localhost:4000/register', form)\r\n      setLoading(false)\r\n      \r\n    } catch (e) {\r\n      setStatus(e.response.status)\r\n      setLoading(false)\r\n      console.error(e);\r\n    }\r\n    await autoLogin()\r\n  }\r\n  const autoLogin = async ()=> {\r\n      const formLogin ={ \r\n        email: email,\r\n        password: password\r\n      }\r\n    \r\n    try {\r\n        await axios.post('http://localhost:4000/login', formLogin).then(res => {\r\n        Storage.set({\r\n          key: 'accessToken',\r\n          value: res.data.accessToken\r\n        })\r\n      })\r\n     \r\n      history.push('/get-all-post')\r\n    } catch (e) {\r\n      setStatus(e.response.status)\r\n      console.log(e)\r\n    }\r\n  }\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setAvatar(file);\r\n  };\r\n  return (\r\n    <>\r\n    {\r\n      loading ? <CircularProgress  size={70}\r\n      sx={{\r\n        position: \"fixed\",\r\n        left: \"50%\",\r\n        top: \"50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        zIndex: 2}}/> \r\n      :    \r\n      <>\r\n      <div className='register-contianer'>\r\n        <div className='input-contianer'>\r\n            {avatar ?\r\n                    <img alt='Error' style={{borderRadius: '50%', width: '80px',height: '80px'}} src={URL.createObjectURL(avatar)} />\r\n                    :\r\n                    <input className='imgFile' onChange={handleFileChange} type='file' />\r\n            }\r\n          <label htmlFor='name'>اسم المستخدم</label>\r\n          <input  name='name' value={name} onChange={(e) => setName(e.target.value)} type='text' required/>\r\n\r\n          <label htmlFor=\"email\">البريد الاكتروني</label>\r\n          <input  name='email' value={email} onChange={(e) => setEmail(e.target.value)} type='text' required/>\r\n\r\n          <label htmlFor=\"password\">كلمة المرور</label>\r\n          <input  name='password' value={password} onChange={(e) => setPassword(e.target.value)} type='password' required/>\r\n          <label htmlFor=\"password2\">تأكيد كلمة المرور</label>\r\n          <input  name='password2' onChange={(e) => setSeePassword(e.target.value)} type='password' required/>\r\n          <button type='sunmet' onClick={()=> onSubmet()}>انشاء الحساب</button>\r\n          <br/>\r\n          {\r\n            password !== seePassword ? <Alert style={{fontSize: '20px'}} className='alert' severity=\"error\">كلمه المرور غير متطابقه</Alert> : ''\r\n          }\r\n          {\r\n            Status === 401 ? <Alert style={{fontSize: '20px', marginTop: '30px'}} className='alert' severity=\"error\">الحساب مسجل اذهب الى لدي حساب بالفعل</Alert> \r\n            : \r\n            Status === 500 ? <Alert style={{fontSize: '20px', maxHeight: '50px', maxWidth: 'auto'}} className='alert' severity=\"error\">املأ جميع الخانات</Alert> : ''\r\n          }\r\n          <a href='/login'>لدي حساب بالفعل</a>\r\n        </div>\r\n      </div>\r\n    </>\r\n    }\r\n    </>\r\n\r\n  )\r\n}\r\n\r\nexport default Register"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}