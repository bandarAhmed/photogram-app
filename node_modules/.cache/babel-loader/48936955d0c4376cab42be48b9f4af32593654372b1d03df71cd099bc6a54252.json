{"ast":null,"code":"import React,{useContext,useState}from'react';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import{AuthContext}from'../../context/AuthContext';import axios from'axios';import{CircularProgress}from'@mui/material';import'./updatePost.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UpdatePost(){const[title,setTitle]=useState('');const[discraption,setDiscraption]=useState('');const[images,setImages]=useState([]);const[loading,setLoading]=useState(false);const{jwt,postId}=useContext(AuthContext);const history=useHistory();if(postId!==undefined){sessionStorage.setItem('postId',postId);}const git=sessionStorage.getItem('postId',postId);const UpdateData=async()=>{const data=new FormData();data.append('upimg',images);data.append('title',title);data.append('discraption',discraption);try{setLoading(true);await axios.put(\"http://localhost:4000/post/\".concat(git,\"/update\"),data,{headers:{Authorization:jwt}}).then(res=>console.log(res));setLoading(false);history.push('/account/update');}catch(e){console.log(e);setLoading(false);}};const handleFileChange=e=>{const file=e.target.files[0];setImages(file);};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:70,sx:{position:\"fixed\",left:\"50%\",top:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:2}}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"alll\",children:/*#__PURE__*/_jsx(\"div\",{className:\"add-containerr\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-containerr\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Add Image\"}),/*#__PURE__*/_jsx(\"input\",{className:\"imgFilee\",onChange:handleFileChange,type:\"file\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{value:title,onChange:e=>setTitle(e.target.value),className:\"text-inputt\",type:\"text\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Dicraptions\"}),/*#__PURE__*/_jsx(\"textarea\",{value:discraption,onChange:e=>setDiscraption(e.target.value),type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-button\",onClick:UpdateData,type:\"submit\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"})]})})})})});}export default UpdatePost;","map":{"version":3,"names":["React","useContext","useState","useHistory","AuthContext","axios","CircularProgress","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdatePost","title","setTitle","discraption","setDiscraption","images","setImages","loading","setLoading","jwt","postId","history","undefined","sessionStorage","setItem","git","getItem","UpdateData","data","FormData","append","put","concat","headers","Authorization","then","res","console","log","push","e","handleFileChange","file","target","files","children","size","sx","position","left","top","transform","zIndex","className","onChange","type","value","onClick"],"sources":["C:/Users/baaan/Desktop/Photogram/photogramclient/src/pages/update/UpdatePost.js"],"sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport axios from 'axios';\r\nimport { CircularProgress } from '@mui/material';\r\nimport './updatePost.css';\r\n\r\nfunction UpdatePost() {\r\n  const [title, setTitle] = useState('');\r\n  const [discraption, setDiscraption] = useState('');\r\n  const [images, setImages] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { jwt, postId } = useContext(AuthContext);\r\n  const history = useHistory()\r\n\r\n  if (postId !== undefined) {\r\n    sessionStorage.setItem('postId', postId);\r\n}\r\nconst git = sessionStorage.getItem('postId', postId)\r\n\r\n  const UpdateData = async () => {\r\n    const data = new FormData()\r\n    data.append('upimg',images)\r\n    data.append('title',title)\r\n    data.append('discraption',discraption)\r\n        \r\n    try {\r\n        setLoading(true)\r\n        await axios.put(`http://localhost:4000/post/${git}/update`, data, {\r\n          headers: {\r\n            Authorization: jwt,\r\n          },\r\n        }).then(res=> console.log(res))\r\n        setLoading(false)\r\n        history.push('/account/update')\r\n    } catch (e) {\r\n        console.log(e)\r\n        setLoading(false)\r\n    }\r\n}\r\n  const handleFileChange = (e)=> {\r\n    const file = e.target.files[0]\r\n    setImages(file)\r\n  }\r\n  return (\r\n    <>\r\n\r\n    {\r\n      loading ? <CircularProgress size={70}\r\n        sx={{\r\n          position: \"fixed\",\r\n          left: \"50%\",\r\n          top: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          zIndex: 2\r\n        }} />\r\n        :\r\n        <>\r\n          <div className='alll'>\r\n            <div className='add-containerr'>\r\n              <div className='form-containerr'>\r\n                <label>Add Image</label>\r\n                  <input className='imgFilee' onChange={handleFileChange} type='file' />\r\n                <label>Title</label>\r\n                <input value={title} onChange={(e) => setTitle(e.target.value)} className='text-inputt' type='text' />\r\n                <label>Dicraptions</label>\r\n                <textarea value={discraption} onChange={(e) => setDiscraption(e.target.value)} type='text' />\r\n                <button className='edit-button' onClick={UpdateData} type='submit'>تعديل</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n    }\r\n  </>\r\n  )\r\n}\r\n\r\nexport default UpdatePost"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OAASC,UAAU,KAAQ,2CAA2C,CACtE,OAASC,WAAW,KAAQ,2BAA2B,CACvD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,gBAAgB,KAAQ,eAAe,CAChD,MAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1B,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACgB,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAExC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAEoB,GAAG,CAAEC,MAAO,CAAC,CAAGtB,UAAU,CAACG,WAAW,CAAC,CAC/C,KAAM,CAAAoB,OAAO,CAAGrB,UAAU,CAAC,CAAC,CAE5B,GAAIoB,MAAM,GAAKE,SAAS,CAAE,CACxBC,cAAc,CAACC,OAAO,CAAC,QAAQ,CAAEJ,MAAM,CAAC,CAC5C,CACA,KAAM,CAAAK,GAAG,CAAGF,cAAc,CAACG,OAAO,CAAC,QAAQ,CAAEN,MAAM,CAAC,CAElD,KAAM,CAAAO,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC3BD,IAAI,CAACE,MAAM,CAAC,OAAO,CAACf,MAAM,CAAC,CAC3Ba,IAAI,CAACE,MAAM,CAAC,OAAO,CAACnB,KAAK,CAAC,CAC1BiB,IAAI,CAACE,MAAM,CAAC,aAAa,CAACjB,WAAW,CAAC,CAEtC,GAAI,CACAK,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAhB,KAAK,CAAC6B,GAAG,+BAAAC,MAAA,CAA+BP,GAAG,YAAWG,IAAI,CAAE,CAChEK,OAAO,CAAE,CACPC,aAAa,CAAEf,GACjB,CACF,CAAC,CAAC,CAACgB,IAAI,CAACC,GAAG,EAAGC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC,CAC/BlB,UAAU,CAAC,KAAK,CAAC,CACjBG,OAAO,CAACkB,IAAI,CAAC,iBAAiB,CAAC,CACnC,CAAE,MAAOC,CAAC,CAAE,CACRH,OAAO,CAACC,GAAG,CAACE,CAAC,CAAC,CACdtB,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CACC,KAAM,CAAAuB,gBAAgB,CAAID,CAAC,EAAI,CAC7B,KAAM,CAAAE,IAAI,CAAGF,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAC9B5B,SAAS,CAAC0B,IAAI,CAAC,CACjB,CAAC,CACD,mBACErC,IAAA,CAAAI,SAAA,EAAAoC,QAAA,CAGE5B,OAAO,cAAGZ,IAAA,CAACF,gBAAgB,EAAC2C,IAAI,CAAE,EAAG,CACnCC,EAAE,CAAE,CACFC,QAAQ,CAAE,OAAO,CACjBC,IAAI,CAAE,KAAK,CACXC,GAAG,CAAE,KAAK,CACVC,SAAS,CAAE,uBAAuB,CAClCC,MAAM,CAAE,CACV,CAAE,CAAE,CAAC,cAEL/C,IAAA,CAAAI,SAAA,EAAAoC,QAAA,cACExC,IAAA,QAAKgD,SAAS,CAAC,MAAM,CAAAR,QAAA,cACnBxC,IAAA,QAAKgD,SAAS,CAAC,gBAAgB,CAAAR,QAAA,cAC7BtC,KAAA,QAAK8C,SAAS,CAAC,iBAAiB,CAAAR,QAAA,eAC9BxC,IAAA,UAAAwC,QAAA,CAAO,WAAS,CAAO,CAAC,cACtBxC,IAAA,UAAOgD,SAAS,CAAC,UAAU,CAACC,QAAQ,CAAEb,gBAAiB,CAACc,IAAI,CAAC,MAAM,CAAE,CAAC,cACxElD,IAAA,UAAAwC,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBxC,IAAA,UAAOmD,KAAK,CAAE7C,KAAM,CAAC2C,QAAQ,CAAGd,CAAC,EAAK5B,QAAQ,CAAC4B,CAAC,CAACG,MAAM,CAACa,KAAK,CAAE,CAACH,SAAS,CAAC,aAAa,CAACE,IAAI,CAAC,MAAM,CAAE,CAAC,cACtGlD,IAAA,UAAAwC,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BxC,IAAA,aAAUmD,KAAK,CAAE3C,WAAY,CAACyC,QAAQ,CAAGd,CAAC,EAAK1B,cAAc,CAAC0B,CAAC,CAACG,MAAM,CAACa,KAAK,CAAE,CAACD,IAAI,CAAC,MAAM,CAAE,CAAC,cAC7FlD,IAAA,WAAQgD,SAAS,CAAC,aAAa,CAACI,OAAO,CAAE9B,UAAW,CAAC4B,IAAI,CAAC,QAAQ,CAAAV,QAAA,CAAC,gCAAK,CAAQ,CAAC,EAC9E,CAAC,CACH,CAAC,CACH,CAAC,CACN,CAAC,CAEP,CAAC,CAEL,CAEA,cAAe,CAAAnC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}